<!DOCTYPE composition PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:s="http://jboss.org/schema/seam/taglib"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:a="http://richfaces.org/a4j"
	xmlns:rich="http://richfaces.org/rich" template="layout/template.xhtml">


	<ui:define name="body">
		<rich:tabPanel switchType="client">
			<rich:tab>


				<f:facet name="header">
					<h:panelGroup>#{messages['TempEmailAddresses.imported.list']}</h:panelGroup>
				</f:facet>
				<h:form styleClass="association"
					id="dbmailTempEmailAddressesChildren">
					<h:outputText
						value="There are no TempEmailAddresses to import from this Mailbox."
						rendered="#{empty tempEmailAddressHelper.add2import}" />


					<rich:dataTable value="#{tempEmailAddressHelper.add2import}"
						var="_tempEmailAddress"
						rendered="#{not empty tempEmailAddressHelper.add2import}"
						rowClasses="rvgRowOne,rvgRowTwo" id="TempEmailAddressesTable">
							<rich:column sortBy="#{_tempEmailAddress.name}">
							<f:facet name="header">#{messages['TempEmailAddresses.AlreadyExsisting.label']}</f:facet>
							<h:outputText value="#{tempEmailAddressHelper.alreadyInMailbox(_tempEmailAddress)}" />
						</rich:column>
						<rich:column sortBy="#{_tempEmailAddress.name}">
							<f:facet name="header">#{messages['TempEmailAddresses.nominativo.label']}</f:facet>
							<h:outputText value="#{_tempEmailAddress.name}" />
						</rich:column>
						<rich:column sortBy="#{_tempEmailAddress.emailAddress}">
							<f:facet name="header">#{messages['TempEmailAddresses.email.label']}</f:facet>
							<h:outputText value="#{_tempEmailAddress.emailAddress}" />
						</rich:column>
						<rich:column sortBy="#{_tempEmailAddress.retentionDays}">
							<f:facet name="header">#{messages['TempEmailAddresses.politicaConservazioni.label']}</f:facet>

							<h:selectOneRadio
								value="#{tempEmailAddressHelper.imported2Retention[_tempEmailAddress]}">
								<f:selectItem itemLabel="discard" itemValue="0" />
								<f:selectItem itemLabel="deliver" itemValue="-1" />
								<f:selectItem itemLabel="retain" itemValue="1" />
								<f:ajax event="change" render="RetentionPolicyValue"
									execute="@this" />
									<f:converter converterId="retentionPolicyConverter"/>
								
							</h:selectOneRadio>
							<h:inputText id="RetentionPolicyValue" required="true"
								value="#{_tempEmailAddress.retentionDays}"
								converterMessage="Retention Days must be a number"
								disabled="#{tempEmailAddressHelper.imported2Retention[_tempEmailAddress]!=1}">

								<f:ajax event="blur" execute="@this"></f:ajax>
							<f:converter converterId="retentionPolicyConverter"/>
								<!-- inputText disabilitato quando retentionPolicy non Ã¨ 1 -->
							</h:inputText>

						</rich:column>
						<rich:column>
							<f:facet name="header">#{messages['TempEmailAddresses.Delete.label']}</f:facet>
							<h:commandButton id="delete"
								action="#{tempEmailAddressHelper.delete(_tempEmailAddress)}"
								value="delete" />

						</rich:column>

					</rich:dataTable>


					<div class="actionButtons">
						<!-- 						<f:facet name="header">#{messages['TempEmailAddresses.Edit.label']}</f:facet> -->
						<h:commandButton id="save" value="Add all"
							action="#{tempEmailAddressHelper.persistAll}" />

					</div>
				</h:form>
			</rich:tab>
		</rich:tabPanel>
	</ui:define>
</ui:composition>

